<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="style2.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

  <title>Document</title>
</head>
<body>
  <app-root></app-root>
</body>
<script>
  //--------------------------------------------------------------------------------------------------------------------------------------------

  id_camera
  function habilitar_edicion(){
     var onoff = document.getElementById("onoff");
     var botonera = document.getElementsByClassName("botonera");
     var basurero = document.getElementsByClassName("basurero");
     var id_cameraa = document.getElementById("id_camera");
     var proyectos = document.getElementById("Edproyectos");

    //PROBLEMA TENGO QUE DAR DOBLE CLIK PARA HABILITAR
     if( onoff.value=="off"){

        for(let variable of botonera){variable.style.display="inline"};
        for(let variable2 of basurero){variable2.style.display="inline"};
        id_cameraa.style.display = "inline";
        proyectos.style.display = "block";
        onoff.value="on";
        ocultarEmail()
     }

     else{
        for(let variable of botonera ){variable.style.display="none"};
        for(let variable2 of basurero ){variable2.style.display="none"};
        id_cameraa.style.display = "none";
        proyectos.style.display = "none";
        onoff.value="off"
        ocultarEmail()
     }


  }

  //formularioEmail.style.display == ""
  //id_camera.style.display == "none"



  //-----------------------------------------------------------------------------------------------------------------------------------------
     function borrar(parametro){
        var Div_objetivo = document.getElementById(parametro)
        Div_objetivo.parentNode.remove();}

  //-----------------------------------------------------------------------------------------------------------------------------------------------------

     //variables creadas para darle identidad a cada articulo creado
           var id_newp = 0;
           var id_newh1 = 0;
           var id_newTextarea = 0;
           //var id_newButton = 0;
           var id_newBorrar = 0;
          // incremento diferencia (usando numeros de distinta magnitud como id)
        function agregarProyecto(){

           id_newp = id_newp + 1;
           id_newTextarea = id_newTextarea + 100 ;
           //id_newButton = id_newButton + 1000 ;
           id_newh1 = id_newh1 + 1000;
           id_newBorrar = id_newBorrar + 100000 ;


        //genero el contenedor(div), el titulo(h1), el (p) , un textarea y un boton. Se le asignan sus atributos
          var newDiv = document.createElement("div");
          newDiv.setAttribute("class","container nuevo");
          var newh1 = document.createElement("h2");
          newh1.setAttribute("id",id_newh1);
          var newp = document.createElement("p");
          newp.setAttribute("id",id_newp);
          //var newButton =document.createElement("button");
          //newButton.setAttribute("id", id_newButton)


          var newButtonTitle =document.createElement("button");
          newButtonTitle.setAttribute("class","bi bi-pencil botonera");
          newButtonTitle.setAttribute("data-bs-toggle", "modal")
          newButtonTitle.setAttribute("data-bs-target", "#exampleModal")
          newButtonTitle.setAttribute("onclick", "cambiarIp(this.nextElementSibling.id)")
          newButtonTitle.setAttribute("style", "display:inline")

          var newButton2 =document.createElement("button");
           newButton2.setAttribute("class","bi bi-pencil botonera");
           newButton2.setAttribute("data-bs-toggle", "modal")
           newButton2.setAttribute("data-bs-target", "#exampleModal")
           newButton2.setAttribute("onclick", "cambiarIp(this.nextElementSibling.id)")
           newButton2.setAttribute("style", "display:inline")

          var newTextarea =document.createElement("textarea");
          newTextarea.setAttribute("id",id_newTextarea);
          newTextarea.setAttribute("style","display:none");
          newTextarea.setAttribute("class","form-control");
          var newBorrar = document.createElement("button");
          newBorrar.setAttribute("class","bi bi-trash rounded float-end basurero");
          newBorrar.setAttribute("id", id_newBorrar)
          newBorrar.setAttribute("style", "display:inline")
          //seleccion y obtengo los valores correspondientes a id:inputText (donde escribo) y id:titulo (titulo que escribo)
          var inputText = document.getElementById("inputText").value;
          var titulo = document.getElementById("titulo").value;

          //inserto el boton, h1, p y textarea dentro del div
          newDiv.appendChild(newBorrar);
          //newDiv.appendChild(newButton);

          newDiv.appendChild(newButtonTitle);
          newDiv.appendChild(newh1);
          newDiv.appendChild(newButton2);
          newDiv.appendChild(newp);
          newDiv.appendChild(newTextarea);

          //creo un nodo de texto con la info dentro de titulo, y lo inserto dentro de h1
           var newTitle = document.createTextNode(titulo)
           newh1.appendChild(newTitle);

           //creo un nodo de texto con la info dentro de inputText, y lo inserto dentro de p
           var newContent = document.createTextNode(inputText);
           newp.appendChild(newContent);

          //selecciono al elemento Edproyectos (id del div contenedor) e inserto todo debajo de dicho div
           var currentDiv = document.getElementById("Edproyectos");
           document.body.insertBefore(newDiv, currentDiv);


           //tomo lo que esta escrito en detalle y lo copio en textarea de edicion (que aparezca lo que inserte previamente)
           document.getElementById(id_newTextarea).innerHTML = document.getElementById("inputText").value;

          /* // DESACTIVO EL TITULO
           let a = document.getElementById(i);
           let texto_sin_salto = document.getElementById("inputText").value;
           let texto_con_salto = texto_sin_salto.replaceAll('\n', '<br/>');
           a.innerHTML=texto_con_salto*/
           //resumen de lo anterior, tomo el texto de inputText y le saco los espacio para ponerlo en:
           document.getElementById(id_newp).innerHTML=document.getElementById("inputText").value.replaceAll('\n', '<br/>');


           //evento click sobre boton activa funcion que reconoce id del boton activado y en funcion de este determina
           // cuales de los <p> y textarea debe hacer visible u ocultar


           /*   document.getElementById(id_newButton).onclick= function() {
          //uso el id del boton como punto de referencia y la division me devuelve los id de p y de textarea necesario (encontre otra forma)
           let parrafo= this.id/1000;
           let textoare =this.id/10;
           let txtModif = document.getElementById(parrafo);
           let textArea = document.getElementById(textoare);
             if (textArea.style.display =="none") {
                    txtModif.style.display = "none";
                    textArea.style.display="";}
              else {var text =  textArea.value.replaceAll('\n', '<br/>');//tranforma los saltos en <br>
                    txtModif.innerHTML = text;
                    txtModif.style.display = "";
                    textArea.style.display="none";}}*/


           document.getElementById(id_newBorrar).onclick= function() {

              var Div_objetivo = document.getElementById(this.id)
              Div_objetivo.parentNode.remove();}
                }





  //-----------------------------------------------------------------------------------------------------------------------------------------

     //boton que alterna entre editar y guardar.

     function editar_guardar(texto_a_modificar, idtextarea ){

      var txtModif = document.getElementById(texto_a_modificar);
      var textArea = document.getElementById(idtextarea);

        if (textArea.style.display =="none") {
           txtModif.style.display = "none";
           textArea.style.display="";
           }
        else {var text =  textArea.value.replaceAll('\n', '<br/>');
           txtModif.innerHTML = text;
           txtModif.style.display = "";
           textArea.style.display="none";}}

  //----------------------------------------------------------------------------------------------------------------------------------------------------

  function editar_presentacion(){

     //document.getElementById("txtarea_presentacion").value=document.getElementById("texto_presentacion").innerText;

     var txtModif = document.getElementById("texto_presentacion");
     var textArea = document.getElementById("txtarea_presentacion");


     if (textArea.style.display =="none") {
           txtModif.style.display = "none";
           textArea.style.display="";}
     else {var text =  textArea.value.replaceAll('\n', '<br/>');
           txtModif.innerHTML = text;
           txtModif.style.display = "";
           textArea.style.display="none";}


        }

   //-----------------------------------------------------------------------------------------------------------
   //recibe el value desde boton guardar del modal, y lo usa como ip para modificar el texto objetivo
   function insertar(parametro){

  document.getElementById(parametro).innerText=document.getElementById("escritura").value;
  document.getElementById("escritura").value="";
  }

  //recibe el valor del ip del objetivo o un value (que es igual al ip objetivo), y lo inserta como value para el boton guardar del modal
  function cambiarIp(parametro){
  var newValue = parametro;
  document.getElementById("ip_inicial").setAttribute("value",newValue);
  }









  //-----------------------------------------------------------------------------------------------------------------------------------------

    function ocultarEmail(){
     if(document.getElementById("formularioEmail").style.display ==""){
        document.getElementById("formularioEmail").style.display ="none"
     }
     else{document.getElementById("formularioEmail").style.display =""}}

     //--------------------------------------------------------------------------------------------------------------------------


   //---------------------------------------------------------------------------------------------------

   //selecciona a donde pertenece
      function selector(editor, texto_a_modificar) {
       x = editor;//id del input que recibe texto
       y = texto_a_modificar;//id del "p", (texto a modificar)
       habilitar_input(x); //llama a la funcion habilitar y le pasa "x" como parametro
       let textarea = document.getElementById(x) //selecciona "x", y lo tranforma en variable
       textarea.addEventListener('keyup', (e) => {//escucha
       logMessage('Key "${e.key}" relased [event:keyup]')
       if(e.key == "Enter"){document.getElementById(x).style.display = "none"}})
       document.getElementById(editor).value ="";
      }
      //habilita editor, cambia el texto y detecta enter
      function habilitar_input(x) {document.getElementById(x).style.display="block";}
      function cambiar_texto(valor) {document.getElementById(y).innerText = valor;}
      function logMessage(message){console.log(message + "<br>");}



  //script para autosize de textarea
          var textarea = document.querySelector('textarea');
           textarea.addEventListener('keyup', autosize);
           function autosize(){
           var el = this;
           setTimeout(function(){
              el.style.cssText = 'height:auto; padding:0';
              el.style.cssText = 'height:' + el.scrollHeight + 'px';
           },0);
           }
  </script>
</html>
